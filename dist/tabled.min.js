"use strict";var Selectors;!function(e){e.stacked="tabled--stacked",e.table="tabled__table",e.columnLarge="tabled__column--large",e.columnSmall="tabled__column--small",e.wrapper="tabled__wrapper",e.container="tabled",e.fadeLeft="tabled--fade-left",e.fadeRight="tabled--fade-right",e.navigation="tabled__navigation",e.previous="tabled__previous",e.next="tabled__next",e.caption="tabled__caption"}(Selectors=Selectors||{});class Tabled{constructor(e){if(e.index||(e.index=Math.floor(1e4*Math.random())),this.checkConditions(e.table)){e.table.classList.add(Selectors.table),this.wrap(e.table);var t=this.getWrapper(e.table);t.setAttribute("id","tabled-n"+e.index),this.adjustColumnsWidth(e),this.addTableControls(e),this.applyFade(e.table),t.addEventListener("scroll",()=>{this.applyFade(e.table)}),new ResizeObserver(()=>{this.applyFade(e.table)}).observe(t)}else if(e.table.classList.contains(Selectors.stacked)){const a=Array.from(e.table.querySelectorAll("thead th"));Array.from(e.table.querySelectorAll("tbody tr")).forEach(e=>{Array.from(e.querySelectorAll("td, th")).forEach((e,t)=>{t=a[t];t&&e.setAttribute("data-label",t.innerText+": ")})})}else e.failClass&&e.table.classList.add(e.failClass)}getWrapper(e){return e.parentNode}getContainer(e){return e.parentNode?e.parentNode.parentNode:null}adjustColumnsWidth(e){var t,a;const l=null!=(t=e.characterThresholdLarge)?t:50,r=null!=(t=e.characterThresholdSmall)?t:8;for(a of e.table.rows)Array.from(a.cells).forEach(e=>{e.innerText.length>l?e.classList.add(Selectors.columnLarge):e.innerText.length<=r&&e.classList.add(Selectors.columnSmall)})}wrap(e){var t=document.createElement("div"),e=(t.classList.add(Selectors.wrapper),t.setAttribute("tabindex","0"),e.parentNode.insertBefore(t,e),t.appendChild(e),document.createElement("div"));e.classList.add(Selectors.container),t.parentNode.insertBefore(e,t),e.appendChild(t)}applyFade(e){var e=this.getWrapper(e),t=e.parentNode,a=t.getElementsByClassName(Selectors.previous)[0],l=t.getElementsByClassName(Selectors.next)[0],a=(1<e.scrollLeft?(t.classList.add(Selectors.fadeLeft),a.removeAttribute("disabled")):(t.classList.remove(Selectors.fadeLeft),a.setAttribute("disabled","disabled")),e.offsetWidth);e.scrollWidth-e.scrollLeft-a<1?(t.classList.remove(Selectors.fadeRight),l.setAttribute("disabled","disabled")):(t.classList.add(Selectors.fadeRight),l.removeAttribute("disabled"))}move(e,t="previous"){var a,l=this.getWrapper(e),r=null!=(a=null==(a=l.parentNode)?void 0:a.getBoundingClientRect().left)?a:0,s=(1<e.rows[0].cells.length?e.rows[0]:e.rows[1]).cells;let o=0,d=0;if("next"==t)for(let e=0;e<s.length;e++){var i=s[e].getClientRects()[0].left;if(1<(o=i-r)){d=s[e].offsetLeft;break}}else if("previous"==t)for(let e=s.length-1;0<e;e--){var n=s[e].getClientRects()[0].left;if((o=n-r)<0){d=s[e].offsetLeft;break}}l.scrollTo({left:d,top:0,behavior:"smooth"})}addTableControls(e){const a=e.table,l=document.createElement("div");l.classList.add(Selectors.navigation),["previous","next"].forEach(e=>{var t=document.createElement("button");t.classList.add("tabled__"+e),t.setAttribute("aria-label",e+" table column"),t.setAttribute("aria-controls",this.getWrapper(a).getAttribute("id")),t.setAttribute("disabled","disabled"),t.setAttribute("type","button"),t.addEventListener("click",()=>{this.move(a,e)}),l.appendChild(t)});var t,r=this.getContainer(a),r=(r&&r.prepend(l),a.querySelector("caption"));r&&(r.classList.add("visually-hidden"),(t=document.createElement("div")).classList.add(Selectors.caption),"bottom"===e.captionSide&&t.classList.add("tabled__caption--bottom"),t.innerHTML=r.innerText,t.setAttribute("aria-hidden","true"),r=this.getContainer(a))&&("bottom"===e.captionSide?r.appendChild(t):r.prepend(t))}checkConditions(e){return!(e.classList.contains(Selectors.stacked)||e.querySelector("table")||!e.querySelector("table > tbody")||document.evaluate("ancestor::table",e,null,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue)}}